# Critical if

---

In this *mini-pe* were made a lot of tests to try to minimize the lock contention, what happens when a thread have to wait because another thread is using the critical session. To measure the time spent in the LC we used a code that finds the biggest element in a array.

> 1. Make tests changing the size of the vector, the amount of threads and the amount of nested ifs, showing means and confidence intervals.

In order to obtain such informations, I made an adaptation of the script given by Matheus Lima, generating a Markdown Table with all necessary information.
Moreover, I used the program `calc.c` to calculate the mean, confidence interval and upper/lower bounds of the interval. Having as sample space 50 time of execution of `contention.c`    

Each cell of the table present 4 informations:
1. Mean
2. Confidence interval (95% trust)
3. Lower bound of ci
4. Upper bound of ci

The table follows:

## 1 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000312s 0.000009s 0.000303s 0.000321s|0.001700s 0.000022s 0.001678s 0.001722s|0.008346s 0.000618s 0.007728s 0.008964s|0.061224s 0.000138s 0.061086s 0.061362s|0.612886s 0.005503s 0.607383s 0.618389s|
|2|0.000102s 0.000004s 0.000098s 0.000106s|0.000518s 0.000011s 0.000507s 0.000529s|0.004790s 0.000034s 0.004756s 0.004824s|0.044054s 0.001010s 0.043044s 0.045064s|0.324122s 0.004045s 0.320077s 0.328167s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000400s 0.000000s 0.000400s 0.000400s|0.003590s 0.000205s 0.003385s 0.003795s|0.030600s 0.000024s 0.030576s 0.030624s|0.285602s 0.001241s 0.284361s 0.286843s|
|4|0.000102s 0.000004s 0.000098s 0.000106s|0.000338s 0.000019s 0.000319s 0.000357s|0.002970s 0.000129s 0.002841s 0.003099s|0.023318s 0.000192s 0.023126s 0.023510s|0.229048s 0.000870s 0.228178s 0.229918s|

## 2 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000310s 0.000009s 0.000301s 0.000319s|0.001504s 0.000029s 0.001475s 0.001533s|0.010436s 0.000110s 0.010326s 0.010546s|0.061300s 0.000381s 0.060919s 0.061681s|0.626336s 0.012138s 0.614198s 0.638474s|
|2|0.000102s 0.000004s 0.000098s 0.000106s|0.000528s 0.000013s 0.000515s 0.000541s|0.004756s 0.000077s 0.004679s 0.004833s|0.043480s 0.001233s 0.042247s 0.044713s|0.324570s 0.004688s 0.319882s 0.329258s|
|3|0.000102s 0.000004s 0.000098s 0.000106s|0.000400s 0.000000s 0.000400s 0.000400s|0.003600s 0.000203s 0.003397s 0.003803s|0.030576s 0.000021s 0.030555s 0.030597s|0.284760s 0.001087s 0.283673s 0.285847s|
|4|0.000104s 0.000006s 0.000098s 0.000110s|0.000356s 0.000019s 0.000337s 0.000375s|0.002864s 0.000125s 0.002739s 0.002989s|0.023386s 0.000208s 0.023178s 0.023594s|0.229562s 0.001234s 0.228328s 0.230796s|

## 3 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000102s 0.000004s 0.000098s 0.000106s|0.000702s 0.000004s 0.000698s 0.000706s|0.006378s 0.000012s 0.006366s 0.006390s|0.061000s 0.000023s 0.060977s 0.061023s|0.612006s 0.005587s 0.606419s 0.617593s|
|2|0.000106s 0.000007s 0.000099s 0.000113s|0.000532s 0.000013s 0.000519s 0.000545s|0.004786s 0.000058s 0.004728s 0.004844s|0.043412s 0.001428s 0.041984s 0.044840s|0.324198s 0.003978s 0.320220s 0.328176s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000402s 0.000004s 0.000398s 0.000406s|0.003588s 0.000205s 0.003383s 0.003793s|0.030752s 0.000252s 0.030500s 0.031004s|0.284712s 0.000880s 0.283832s 0.285592s|
|4|0.000100s 0.000000s 0.000100s 0.000100s|0.000356s 0.000021s 0.000335s 0.000377s|0.003016s 0.000151s 0.002865s 0.003167s|0.023396s 0.000326s 0.023070s 0.023722s|0.229426s 0.001243s 0.228183s 0.230669s|

## 4 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000102s 0.000004s 0.000098s 0.000106s|0.000700s 0.000000s 0.000700s 0.000700s|0.006372s 0.000013s 0.006359s 0.006385s|0.061060s 0.000032s 0.061028s 0.061092s|0.615760s 0.008199s 0.607561s 0.623959s|
|2|0.000106s 0.000007s 0.000099s 0.000113s|0.000528s 0.000013s 0.000515s 0.000541s|0.004790s 0.000039s 0.004751s 0.004829s|0.043358s 0.001317s 0.042041s 0.044675s|0.323864s 0.004764s 0.319100s 0.328628s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000406s 0.000009s 0.000397s 0.000415s|0.003542s 0.000190s 0.003352s 0.003732s|0.030610s 0.000035s 0.030575s 0.030645s|0.285364s 0.000970s 0.284394s 0.286334s|
|4|0.000104s 0.000006s 0.000098s 0.000110s|0.000366s 0.000020s 0.000346s 0.000386s|0.002922s 0.000123s 0.002799s 0.003045s|0.023454s 0.000258s 0.023196s 0.023712s|0.229808s 0.001301s 0.228507s 0.231109s|

## 5 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000100s 0.000000s 0.000100s 0.000100s|0.000700s 0.000000s 0.000700s 0.000700s|0.006382s 0.000016s 0.006366s 0.006398s|0.061190s 0.000378s 0.060812s 0.061568s|0.619114s 0.006906s 0.612208s 0.626020s|
|2|0.000102s 0.000004s 0.000098s 0.000106s|0.000532s 0.000013s 0.000519s 0.000545s|0.004786s 0.000062s 0.004724s 0.004848s|0.043816s 0.001232s 0.042584s 0.045048s|0.321930s 0.004002s 0.317928s 0.325932s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000406s 0.000012s 0.000394s 0.000418s|0.003686s 0.000230s 0.003456s 0.003916s|0.030608s 0.000037s 0.030571s 0.030645s|0.284898s 0.001010s 0.283888s 0.285908s|
|4|0.000100s 0.000000s 0.000100s 0.000100s|0.000360s 0.000022s 0.000338s 0.000382s|0.002808s 0.000120s 0.002688s 0.002928s|0.023518s 0.000237s 0.023281s 0.023755s|0.228842s 0.000559s 0.228283s 0.229401s|

## 6 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000110s 0.000009s 0.000101s 0.000119s|0.000700s 0.000000s 0.000700s 0.000700s|0.006374s 0.000013s 0.006361s 0.006387s|0.061022s 0.000022s 0.061000s 0.061044s|0.620118s 0.007654s 0.612464s 0.627772s|
|2|0.000102s 0.000004s 0.000098s 0.000106s|0.000534s 0.000014s 0.000520s 0.000548s|0.004810s 0.000009s 0.004801s 0.004819s|0.044022s 0.000928s 0.043094s 0.044950s|0.320294s 0.002383s 0.317911s 0.322677s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000404s 0.000006s 0.000398s 0.000410s|0.003552s 0.000194s 0.003358s 0.003746s|0.030582s 0.000026s 0.030556s 0.030608s|0.285074s 0.001160s 0.283914s 0.286234s|
|4|0.000100s 0.000000s 0.000100s 0.000100s|0.000366s 0.000021s 0.000345s 0.000387s|0.002812s 0.000083s 0.002729s 0.002895s|0.023474s 0.000249s 0.023225s 0.023723s|0.229726s 0.001258s 0.228468s 0.230984s|

## 7 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000100s 0.000000s 0.000100s 0.000100s|0.000700s 0.000000s 0.000700s 0.000700s|0.006384s 0.000011s 0.006373s 0.006395s|0.061038s 0.000033s 0.061005s 0.061071s|0.620586s 0.008456s 0.612130s 0.629042s|
|2|0.000106s 0.000007s 0.000099s 0.000113s|0.000530s 0.000013s 0.000517s 0.000543s|0.004764s 0.000067s 0.004697s 0.004831s|0.043922s 0.001105s 0.042817s 0.045027s|0.318620s 0.001941s 0.316679s 0.320561s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000406s 0.000009s 0.000397s 0.000415s|0.003658s 0.000224s 0.003434s 0.003882s|0.030634s 0.000042s 0.030592s 0.030676s|0.284634s 0.001152s 0.283482s 0.285786s|
|4|0.000104s 0.000006s 0.000098s 0.000110s|0.000342s 0.000016s 0.000326s 0.000358s|0.003004s 0.000138s 0.002866s 0.003142s|0.023546s 0.000235s 0.023311s 0.023781s|0.229066s 0.001220s 0.227846s 0.230286s|

## 8 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000102s 0.000004s 0.000098s 0.000106s|0.000704s 0.000006s 0.000698s 0.000710s|0.006372s 0.000013s 0.006359s 0.006385s|0.061060s 0.000110s 0.060950s 0.061170s|0.611982s 0.003923s 0.608059s 0.615905s|
|2|0.000100s 0.000000s 0.000100s 0.000100s|0.000530s 0.000014s 0.000516s 0.000544s|0.004774s 0.000053s 0.004721s 0.004827s|0.043110s 0.001299s 0.041811s 0.044409s|0.321020s 0.003470s 0.317550s 0.324490s|
|3|0.000102s 0.000004s 0.000098s 0.000106s|0.000402s 0.000004s 0.000398s 0.000406s|0.003554s 0.000193s 0.003361s 0.003747s|0.030618s 0.000031s 0.030587s 0.030649s|0.285502s 0.001100s 0.284402s 0.286602s|
|4|0.000100s 0.000000s 0.000100s 0.000100s|0.000344s 0.000021s 0.000323s 0.000365s|0.002852s 0.000137s 0.002715s 0.002989s|0.023310s 0.000214s 0.023096s 0.023524s|0.229568s 0.001199s 0.228369s 0.230767s|

## 9 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000102s 0.000004s 0.000098s 0.000106s|0.000702s 0.000004s 0.000698s 0.000706s|0.006382s 0.000018s 0.006364s 0.006400s|0.060998s 0.000022s 0.060976s 0.061020s|0.615696s 0.005749s 0.609947s 0.621445s|
|2|0.000102s 0.000004s 0.000098s 0.000106s|0.000524s 0.000012s 0.000512s 0.000536s|0.004758s 0.000059s 0.004699s 0.004817s|0.044596s 0.000934s 0.043662s 0.045530s|0.322316s 0.001969s 0.320347s 0.324285s|
|3|0.000100s 0.000000s 0.000100s 0.000100s|0.000400s 0.000000s 0.000400s 0.000400s|0.003554s 0.000193s 0.003361s 0.003747s|0.030590s 0.000035s 0.030555s 0.030625s|0.285066s 0.000911s 0.284155s 0.285977s|
|4|0.000102s 0.000004s 0.000098s 0.000106s|0.000342s 0.000016s 0.000326s 0.000358s|0.002998s 0.000128s 0.002870s 0.003126s|0.023460s 0.000218s 0.023242s 0.023678s|0.229474s 0.001066s 0.228408s 0.230540s|

## 10 IFs
| sz \ t |100|1000|10000|100000|1000000|
|---|---|---|---|---|---|
|1|0.000104s 0.000006s 0.000098s 0.000110s|0.000700s 0.000000s 0.000700s 0.000700s|0.006378s 0.000012s 0.006366s 0.006390s|0.061022s 0.000030s 0.060992s 0.061052s|0.614538s 0.005427s 0.609111s 0.619965s|
|2|0.000106s 0.000007s 0.000099s 0.000113s|0.000538s 0.000014s 0.000524s 0.000552s|0.004778s 0.000057s 0.004721s 0.004835s|0.044976s 0.000679s 0.044297s 0.045655s|0.318594s 0.002016s 0.316578s 0.320610s|
|3|0.000102s 0.000004s 0.000098s 0.000106s|0.000402s 0.000004s 0.000398s 0.000406s|0.003570s 0.000191s 0.003379s 0.003761s|0.030778s 0.000326s 0.030452s 0.031104s|0.283824s 0.000953s 0.282871s 0.284777s|
|4|0.000100s 0.000000s 0.000100s 0.000100s|0.000370s 0.000020s 0.000350s 0.000390s|0.002816s 0.000103s 0.002713s 0.002919s|0.023468s 0.000346s 0.023122s 0.023814s|0.229250s 0.000768s 0.228482s 0.230018s|


> 2. Give an opinion of what you observed in the preview item. Why do you think those results ocurred?

Analysing the results generated by the experiment, I believe that the ideal number of nested ifs is 5. That is because 5 is a number near the number of threads that my computer have (4), such fact would generate some king of *harmony* between ifs and threds.


# addendum

- You can reproduce the experiment running the folowing commands:
```terminal

    gcc calc.c -lm -o calc
    bash script

```

- My execution time:
```
real	14m12,442s
user	27m52,829s
sys	0m11,081s
```
